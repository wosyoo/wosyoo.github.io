(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[95549],{68787:function(e,t,o){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[prefix]/[slug]",function(){return o(77600)}])},77600:function(e,t,o){"use strict";o.r(t),o.d(t,{__N_SSG:function(){return r}});var l=o(85893),n=o(58979),r=!0;t.default=e=>(0,l.jsx)(n.default,{...e})},58979:function(e,t,o){"use strict";o.r(t),o.d(t,{__N_SSG:function(){return b},default:function(){return h}});var l=o(85893),n=o(67294),r=()=>{let[e,t]=(0,n.useState)(""),[o,r]=(0,n.useState)(!1),i=()=>{r(!1),t("")};return{showNotification:e=>{t(e),r(!0),setTimeout(()=>{i()},3e3)},closeNotification:i,Notification:()=>(0,l.jsx)("div",{className:"notification fixed left-0 w-full px-2 z-20 bottom-14",children:(0,l.jsxs)("div",{className:" ".concat(o&&e?"opacity-100 ":"invisible opacity-0 bottom-0"," transition-opacity duration-200 \n           max-w-3xl mx-auto bg-green-500 flex items-center justify-between px-4 py-2 text-white rounded-lg shadow-lg"),children:[e,(0,l.jsx)("button",{onClick:i,className:"ml-4 p-2 cursor-pointer bg-transparent text-white border-none",children:(0,l.jsx)("i",{className:"fas fa-times"})})]})})}},i=o(69325),a=o(78174),s=o(11163);let u=e=>{document.querySelectorAll("a.notion-table-of-contents-item").forEach(t=>{e?(t.style.pointerEvents="none",t.style.opacity="0.5"):(t.style.pointerEvents="auto",t.style.opacity="1")})};var d=()=>{let e=(0,s.useRouter)(),t=(0,i.JA)("OPEN_WRITE_QRCODE","请配置公众号二维码"),o=(0,i.JA)("OPEN_WRITE_BLOG_ID"),r=(0,i.JA)("OPEN_WRITE_NAME","请配置公众号名"),d=(0,i.JA)("OPEN_WRITE_KEYWORD","请配置公众号关键词"),c=(0,i.JA)("OPEN_WRITE_BTN_TEXT","原创不易，完成人机检测，阅读全文"),f=(0,i.JA)("OPEN_WRITE_VALIDITY_DURATION",1),p=(0,i.JA)("OPEN_WRITE_WHITE_LIST",""),v=async()=>{if(!function(e,t){if(!e||!t)return!0;let o=e.replace(/\?.*$/,"").replace(/.*\/([^/]+)(?:\.html)?$/,"$1"),l=t.includes(o);return l&&console.log("OpenWrite白名单",o),l}(e.asPath,p))try{var l;await (0,a.loadExternalResource)("https://readmore.openwrite.cn/js/readmore-2.0.js","js");let e=null===(l=window)||void 0===l?void 0:l.BTWPlugin;if(e){let l=new e;window.btw=l,l.init({qrcode:t,id:"article-wrapper",name:r,btnText:c,keyword:d,blogId:o,cookieAge:f});let n=setInterval(()=>{let e=document.getElementById("read-more-wrap"),t=document.getElementById("article-wrapper");!e&&t&&(u(!1),t.style.height="auto",clearInterval(n))},1e3);return()=>clearInterval(n)}}catch(e){console.error("OpenWrite 加载异常",e)}};return(0,n.useEffect)(()=>{a.isBrowser&&o&&!document.getElementById("read-more-wrap")&&(v(),u(!0))}),(0,l.jsx)(l.Fragment,{})},c=o(93348),f=o(89163);let p={header:0,sub_header:1,sub_sub_header:2},v=(e,t)=>{var o;let l=function e(t,o,l){if(l||(l=[]),!t)return l;for(let a of t){var n,r,i;let t=null===(n=o.block[a])||void 0===n?void 0:n.value;if(!t)continue;let{type:s}=t;s.indexOf("header")>=0&&!l.find(e=>e.id===a)&&l.push({id:a,type:s,text:(0,f.FB)(null===(i=t.properties)||void 0===i?void 0:i.title),indentLevel:p[s]}),(null===(r=t.content)||void 0===r?void 0:r.length)>0&&e(t.content,o,l)}return l}(null!==(o=e.content)&&void 0!==o?o:[],t),n=[{actual:-1,effective:-1}];for(let e of l){let{indentLevel:t}=e;for(;;){let{actual:o,effective:l}=n[n.length-1];if(t>o)e.indentLevel=l+1,n.push({actual:t,effective:e.indentLevel});else if(t===o){e.indentLevel=l;break}else n.pop()}}return l},_=e=>{let t=new URL(e,a.isBrowser?window.location.origin:""),o=Object.fromEntries(t.searchParams.entries());o.password&&localStorage.setItem("password_default",o.password);let l=t.pathname,n=localStorage.getItem("password_"+l),r=localStorage.getItem("password_default");return[o.password,n,r].filter(Boolean)};var w=o(31123),E=o(88495),m=o.n(E),b=!0,h=e=>{let{post:t}=e,o=(0,s.useRouter)(),{locale:a}=(0,c.O)(),[u,f]=(0,n.useState)((null==t?void 0:t.password)&&(null==t?void 0:t.password)!==""),{showNotification:p,Notification:E}=r(),b=e=>{if(!t)return!1;let l=m()((null==t?void 0:t.slug)+e);return!!e&&l===(null==t?void 0:t.password)&&(f(!1),localStorage.setItem("password_"+o.asPath,e),p(a.COMMON.ARTICLE_UNLOCK_TIPS),!0)};(0,n.useEffect)(()=>{if((null==t?void 0:t.password)&&(null==t?void 0:t.password)!=="")f(!0);else{var e;f(!1),!u&&(null==t?void 0:null===(e=t.blockMap)||void 0===e?void 0:e.block)&&(t.content=Object.keys(t.blockMap.block).filter(e=>{var o,l;return(null===(l=t.blockMap.block[e])||void 0===l?void 0:null===(o=l.value)||void 0===o?void 0:o.parent_id)===t.id}),t.toc=v(t,t.blockMap))}let l=_(o.asPath);if(l.length>0){for(let e of l)if(b(e))break}},[t]),(0,n.useEffect)(()=>{var e;!u&&(null==t?void 0:null===(e=t.blockMap)||void 0===e?void 0:e.block)&&(t.content=Object.keys(t.blockMap.block).filter(e=>{var o,l;return(null===(l=t.blockMap.block[e])||void 0===l?void 0:null===(o=l.value)||void 0===o?void 0:o.parent_id)===t.id}),t.toc=v(t,t.blockMap))},[o,u]),e={...e,lock:u,setLock:f,validPassword:b};let h=(0,w.getLayoutByTheme)({theme:(0,i.JA)("THEME"),router:(0,s.useRouter)()});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h,{...e}),(null==t?void 0:t.password)&&(null==t?void 0:t.password)!==""&&!u&&(0,l.jsx)(E,{}),(0,l.jsx)(d,{})]})}}},function(e){e.O(0,[88495,92888,49774,40179],function(){return e(e.s=68787)}),_N_E=e.O()}]);